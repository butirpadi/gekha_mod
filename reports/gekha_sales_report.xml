<odoo>
    <data>

        <!-- disable default sales report on menu -->
        <report id="sale.report_sale_order" string="Quotation / Order" model="sale.order" report_type="qweb-pdf" file="sale.report_saleorder" name="sale.report_saleorder" menu="False" />

        <!-- <report id="gekha_sales_order_report_action" model="sale.order" string="Gekha Sales Order Report" report_type="qweb-pdf" attachment_use="False" print_report_name="'Sales_Order_%s' % object.date_start" name="gekha_mod.gekha_sales_order_report_template" file="gekha_mod.gekha_sales_order_report_template" paperformat="gekha_report_a4" menu="False" -->
            />

        <template id="gekha_report_footer" inherit_id="report.external_layout_footer">
            <xpath expr="//div[@class='footer']" position="replace">
                <div class="footer">
                    <div class="text-center" style="border-top: 1px solid black;">
                        <ul class="list-inline">
                            <li>Developed By: Hassan Enterprises</li>

                            <li>&amp;bull;</li>
                            <li>Phone: +92 321 1234567</li>

                            <li>&amp;bull;</li>
                            <li>Email: abc@gmail.com</li>
                        </ul>

                        <ul class="list-inline">
                            <li>Page:</li>
                            <li>
                                <span class="page"/>
                            </li>
                            <li>/</li>
                            <li>
                                <span class="topage"/>
                            </li>
                        </ul>
                    </div>
                </div>
            </xpath>
        </template>

        <template id="gekha_sales_order_report_template">
            <t t-foreach="docs" t-as="doc">
                <t t-call="report.external_layout">
                    <div class="page" style="font-size:10pt;">
                        <style type="text/css">
                            table.borderless, table.borderless thead tr th, table.borderless tbody tr td {
                                border: none !important;
                            }
                            table.table-small tr td{
                                padding:0;
                                margin:0;
                            }
                        </style>
                        <div class="row">
                            <div class="col-xs-2">
                                <img t-if="user.company_id.logo" t-att-src="'data:image/png;base64,%s' % user.company_id.logo" style="max-height: 45px;"/>
                            </div>
                            <div class="col-xs-8 text-center">
                                <h4>
                                    <strong t-field="user.company_id.name" />
                                </h4>
                                <span t-field="user.company_id.street" />
                                <br/>
                                <span t-field="user.company_id.city" />
                                <span>, </span>
                                <span t-field="user.company_id.state_id" />
                                <span>, Telp. </span>
                                <span t-field="user.company_id.phone" />
                            </div>
                            <div class="col-xs-2">
                            </div>
                        </div>
                        <hr/>
                        <div class="row">
                            <div class="col-xs-6">
                                <h3>SALES ORDER</h3>
                            </div>
                            <div class="col-xs-6">
                                <table class="table table-condensed borderless table-small">
                                    <tbody>
                                        <tr>
                                            <td class="col-xs-4">
                                                <strong>Order #:</strong>
                                            </td>
                                            <td>
                                                <span t-field="doc.name" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="col-xs-4">
                                                <strong>Customer PO:</strong>
                                            </td>
                                            <td>
                                                <span t-field="doc.client_order_ref" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <strong>Date Order:</strong>
                                            </td>
                                            <td>
                                                <span t-field="doc.date_order"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <strong>Payment Terms:</strong>
                                            </td>
                                            <td>
                                                <p t-field="doc.payment_term_id"/>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="text-center">

                            <table class="table borderless table-condensed">
                                <tbody>
                                    <tr>
                                        <td class="col-xs-5">
                                            <strong>Bill to:</strong>
                                            <div t-field="doc.partner_invoice_id" t-options='{"widget": "contact", "fields": ["address", "name", "phone", "fax"], "no_marker": True, "phone_icons": True}'/>
                                            <p t-if="doc.partner_invoice_id.vat">VAT: <span t-field="doc.partner_invoice_id.vat"/>
                                            </p>
                                        </td>
                                        <td class="col-xs-2"></td>
                                        <td class="col-xs-5">
                                            <strong>Ship to:</strong>
                                            <div t-field="doc.partner_shipping_id" t-options='{"widget": "contact", "fields": ["address", "name", "phone", "fax"], "no_marker": True, "phone_icons": True}'/>
                                            <p t-if="doc.partner_shipping_id.vat">VAT: <span t-field="doc.partner_shipping_id.vat"/>
                                            </p>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                            <br/>

                            <t t-set="display_discount" t-value="any([l.discount for l in doc.order_line])"/>

                            <t t-foreach="doc.order_lines_layouted()" t-as="page">
                                <table class="table table-condensed">
                                    <thead>
                                        <tr>
                                            <th>Description</th>
                                            <th class="text-right">Quantity</th>
                                            <th class="text-right">Unit Price</th>
                                            <th t-if="display_discount" class="text-right" groups="sale.group_discount_per_so_line">Disc.(%)</th>
                                            <th class="text-right">Taxes</th>
                                            <th class="text-right" groups="sale.group_show_price_subtotal">Price</th>
                                            <th class="text-right price_tax_included" groups="sale.group_show_price_total">Total Price</th>
                                        </tr>
                                    </thead>
                                    <tbody class="sale_tbody">
                                        <t t-foreach="page" t-as="layout_category">

                                            <t t-if="layout_category_size > 1 or page_size > 1" groups="sale.group_sale_layout">
                                                <tr class="active">
                                                    <td colspan="7" style="font-weight: bold; border-bottom: 1px solid black;">&amp;bull;
                                                        <t t-esc="layout_category['name']"/>
                                                    </td>
                                                </tr>
                                            </t>

                                            <!-- Lines associated -->
                                            <t t-foreach="layout_category['lines']" t-as="l">
                                                <tr>
                                                    <td>
                                                        <span t-field="l.name"/>
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-field="l.product_uom_qty"/>
                                                        <span t-field="l.product_uom" groups="product.group_uom"/>
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-field="l.price_unit"/>
                                                    </td>
                                                    <td t-if="display_discount" class="text-right" groups="sale.group_discount_per_so_line">
                                                        <span t-field="l.discount"/>
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-esc="', '.join(map(lambda x: (x.description or x.name), l.tax_id))"/>
                                                    </td>
                                                    <td class="text-right" groups="sale.group_show_price_subtotal">
                                                        <span t-field="l.price_subtotal" t-options='{"widget": "monetary", "display_currency": doc.pricelist_id.currency_id}'/>
                                                    </td>
                                                    <td class="text-right" groups="sale.group_show_price_total">
                                                        <span t-field="l.price_total" t-options='{"widget": "monetary", "display_currency": doc.pricelist_id.currency_id}'/>
                                                    </td>
                                                </tr>
                                            </t>

                                            <t t-if="(layout_category_size > 1 or page_size > 1) and layout_category['subtotal']" groups="sale.group_sale_layout">
                                                <tr class="text-right">
                                                    <td colspan="6">
                                                        <strong>Subtotal: </strong>
                                                        <t t-set="subtotal" t-value="sum(line.price_subtotal for line in layout_category['lines'])"/>
                                                        <span t-esc="subtotal" t-options="{'widget': 'monetary', 'display_currency': doc.pricelist_id.currency_id}"/>
                                                    </td>
                                                </tr>
                                            </t>

                                        </t>
                                    </tbody>
                                </table>

                                <t t-if="page_index &lt; page_size - 1" groups="sale.group_sale_layout">
                                    <p style="page-break-before:always;"></p>
                                </t>
                            </t>

                            <div class="row" name="total">
                                <div class="col-xs-4 pull-right">
                                    <table class="table table-condensed">
                                        <tr class="border-black">
                                            <td>
                                                <strong>Total Without Taxes</strong>
                                            </td>
                                            <td class="text-right">
                                                <span t-field="doc.amount_untaxed" t-options='{"widget": "monetary", "display_currency": doc.pricelist_id.currency_id}'/>
                                            </td>
                                        </tr>
                                        <t t-foreach="doc._get_tax_amount_by_group()" t-as="amount_by_group">
                                            <tr>
                                                <td>
                                                    <span t-esc="amount_by_group[0] or 'Taxes'"/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-esc="amount_by_group[1]" t-options='{"widget": "monetary", "display_currency": doc.pricelist_id.currency_id}'/>
                                                </td>
                                            </tr>
                                        </t>
                                        <tr class="border-black">
                                            <td>
                                                <strong>Total</strong>
                                            </td>
                                            <td class="text-right">
                                                <span t-field="doc.amount_total" t-options='{"widget": "monetary", "display_currency": doc.pricelist_id.currency_id}'/>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>

                            <p t-field="doc.note" />

                            <p id="fiscal_position_remark" t-if="doc.fiscal_position_id and doc.fiscal_position_id.note">
                                <strong>Fiscal Position Remark:</strong>
                                <span t-field="doc.fiscal_position_id.note"/>
                            </p>
                            <div class="oe_structure"/>

                            <!-- Signature -->

                            <br/>
                            <![CDATA[&nbsp;]]>
                            <br/>
                            <![CDATA[&nbsp;]]>
                            <br/>
                            <![CDATA[&nbsp;]]>
                            <br/>
                            <![CDATA[&nbsp;]]>
                            <br/>
                            <![CDATA[&nbsp;]]>

                            <div class="row">
                                <div class="col-xs-3 text-center">
                                    <p>Prepared by,</p>
                                    <br/>
                                    <![CDATA[&nbsp;]]>
                                    <br/>
                                    <![CDATA[&nbsp;]]>
                                    <br/>
                                    <![CDATA[&nbsp;]]>
                                    <br/>
                                    <![CDATA[&nbsp;]]>
                                    <b>
                                        <t t-esc="user.name" />
                                    </b>
                                </div>
                                <div class="col-xs-3 text-center">
                                    <p>Validated by,</p>
                                    <br/>
                                    <![CDATA[&nbsp;]]>
                                    <br/>
                                    <![CDATA[&nbsp;]]>
                                    <br/>
                                    <![CDATA[&nbsp;]]>
                                    <br/>
                                    <![CDATA[&nbsp;]]>
                                    <b>
                                        <t t-esc="user.company_id.report_validated_by" />
                                    </b>
                                </div>
                                <div class="col-xs-3 text-center">
                                    <p>Verified by,</p>
                                    <br/>
                                    <![CDATA[&nbsp;]]>
                                    <br/>
                                    <![CDATA[&nbsp;]]>
                                    <br/>
                                    <![CDATA[&nbsp;]]>
                                    <br/>
                                    <![CDATA[&nbsp;]]>
                                    <b>
                                        <t t-esc="user.company_id.report_verified_by" />

                                    </b>
                                </div>
                                <div class="col-xs-3 text-center">
                                    <p>Approved by,</p>
                                    <br/>
                                    <![CDATA[&nbsp;]]>
                                    <br/>
                                    <![CDATA[&nbsp;]]>
                                    <br/>
                                    <![CDATA[&nbsp;]]>
                                    <br/>
                                    <![CDATA[&nbsp;]]>
                                    <b>
                                        <t t-esc="user.company_id.report_approved_by" />

                                    </b>
                                </div>
                            </div>

                        </div>

                        <!-- Footer -->
                        <div class="text-center">
                            <br/>
                            <![CDATA[&nbsp;]]>
                            <br/>
                            <![CDATA[&nbsp;]]>
                            <br/>
                            <![CDATA[&nbsp;]]>
                            <hr/>

                            <span>Printed by </span>
                            <i t-field="user.name" />
                            <span> at </span>
                            <i t-field="doc.create_date" />
                        </div>
                    </div>
                </t>
            </t>
        </template>

        <!-- Report "Human readable name" document template -->
        <!-- <record id="gekha_sales_order_report" model="ir.ui.view">
            <field name="name">Gekha Sales Order Report</field>
            <field name="model">sale.order</field>
            <field name="type">qweb</field>
            <field name="mode">primary</field>
            <field name="priority" eval="16" />
            <field name="active" eval="True" />
            <field name="arch" type="xml">
                <t t-name="gekha_mod.gekha_sales_order_report">
                    <t t-call="report.external_layout">
                        <div class="page">
                            <h2>Report title</h2>
                            <p>This object's name is <span t-field="o.name"/>
                            </p>
                        </div>
                    </t>
                </t>
            </field>
        </record> -->

        <!-- Report action to show: "Human readable name" -->
        <record id="gekha_sales_order_report_action" model="ir.actions.report.xml">
            <field name="name">Gekha Sales Order Report Action</field>
            <field name="model">sale.order</field>
            <field name="report_type">qweb-pdf</field>
            <field name="menu">False</field>
            <field name="report_name">gekha_mod.gekha_sales_order_report_template</field>
            <field name="attachment_use" eval="False" />
            <field name="attachment">(object.name+'.pdf')</field>
            <field name="paperformat_id" ref="gekha_report_a4" />
        </record>

        <!-- Button to print the report: "Human readable name" -->
        <!-- <record id="model_values" model="ir.values">
            <field name="name">Human readable name</field>
            <field name="model_id" ref="module.model_model" />
            <field name="model">sale.order</field>
            <field name="value" eval="'ir.actions.report.xml,' +str(ref('action_report_model'))" />
            <field name="key">action</field>
            <field name="key2">client_print_multi</field>
        </record> -->

    </data>
</odoo>